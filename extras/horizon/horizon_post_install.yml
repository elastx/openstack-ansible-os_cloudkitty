- name: Enable the cloudkitty-dashboard Horizon panel
  file:
    src: "{{ item.src }}"
    path: "{{ item.path }}"
    state: "{{ item.state }}"
  notify: Restart apache2
  with_items:
    - src: "{{ horizon_lib_dir }}/cloudkittydashboard/enabled/_10_admin_group.py"
      path: "{{ horizon_lib_dir }}/openstack_dashboard/local/enabled/_10_admin_group.py"
      state: "{{ (horizon_enable_cloudkitty_ui | bool) | ternary('link', 'absent') }}"
    - src: "{{ horizon_lib_dir }}/cloudkittydashboard/enabled/_10_project_group.py"
      path: "{{ horizon_lib_dir }}/openstack_dashboard/local/enabled/_10_project_group.py"
      state: "{{ (horizon_enable_cloudkitty_ui | bool) | ternary('link', 'absent') }}"
    - src: "{{ horizon_lib_dir }}/cloudkittydashboard/enabled/_11_admin_hashmap_panel.py"
      path: "{{ horizon_lib_dir }}/openstack_dashboard/local/enabled/_11_admin_hashmap_panel.py"
      state: "{{ (horizon_enable_cloudkitty_ui | bool) | ternary('link', 'absent') }}"
    - src: "{{ horizon_lib_dir }}/cloudkittydashboard/enabled/_11_admin_rating_panel.py"
      path: "{{ horizon_lib_dir }}/openstack_dashboard/local/enabled/_11_admin_rating_panel.py"
      state: "{{ (horizon_enable_cloudkitty_ui | bool) | ternary('link', 'absent') }}"
    - src: "{{ horizon_lib_dir }}/cloudkittydashboard/enabled/_11_project_rating_panel.py"
      path: "{{ horizon_lib_dir }}/openstack_dashboard/local/enabled/_11_project_rating_panel.py"
      state: "{{ (horizon_enable_cloudkitty_ui | bool) | ternary('link', 'absent') }}"
    - src: "{{ horizon_lib_dir }}/cloudkittydashboard/enabled/_12_project_reporting_panel.py"
      path: "{{ horizon_lib_dir }}/openstack_dashboard/local/enabled/_12_project_reporting_panel.py"
      state: "{{ (horizon_enable_cloudkitty_ui | bool) | ternary('link', 'absent') }}"
    - src: "{{ horizon_lib_dir }}/cloudkittydashboard/enabled/_13_admin_pyscripts_panel.py"
      path: "{{ horizon_lib_dir }}/openstack_dashboard/local/enabled/_13_admin_pyscripts_panel.py"
      state: "{{ (horizon_enable_cloudkitty_ui | bool) | ternary('link', 'absent') }}"
